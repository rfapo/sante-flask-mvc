{% extends 'base.html' %}
{% block title %}Dispatch Report ‚Äì {{ city.name if city else 'City' }}{% endblock %}

{% block extra_css %}
<style>
    .report-container {
        background-color: var(--accent-purple);
        border: 1px solid var(--border-subtle);
        border-radius: 8px;
        padding: 2rem;
        margin-bottom: 2rem;
    }
    
    .report-content {
        background-color: var(--background-dark);
        border: 1px solid var(--border-subtle);
        border-radius: 8px;
        padding: 2rem;
        white-space: pre-wrap;
        font-family: 'Courier New', monospace;
        line-height: 1.6;
        max-height: 600px;
        overflow-y: auto;
    }
    
    .action-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        margin-top: 2rem;
    }
    
    .download-btn {
        background-color: var(--border-subtle);
        color: var(--background-dark);
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
    }
    
    .download-btn:hover {
        background-color: var(--accent-purple);
        color: var(--text-light);
        transform: translateY(-2px);
    }
    
    .back-btn {
        background-color: transparent;
        color: var(--text-light);
        padding: 0.75rem 1.5rem;
        border: 2px solid var(--border-subtle);
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.3s ease;
    }
    
    .back-btn:hover {
        background-color: var(--border-subtle);
        color: var(--background-dark);
    }
</style>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
  <header class="text-center mb-8">
    <img src="{{ url_for('static', filename='sante_logo.png') }}" alt="Sant√© Logo" class="mx-auto h-16 w-auto mb-4">
    <h1 class="text-3xl font-bold text-text-light mb-2">Executive Dispatch Report</h1>
    <p class="text-border-subtle text-lg">AI-Generated Summary for Health Authorities</p>
  </header>

  <div class="report-container">
    <h2 class="text-2xl font-semibold text-text-light mb-4 text-center">Generated Report</h2>
    
    <div class="report-content text-text-light">
{{ report }}
    </div>
    
    <div class="action-buttons">
      <a href="{{ url_for('dashboard.download_report', city_id=city_id) }}" class="download-btn">
        üì• Download as TXT
      </a>
      <a href="{{ url_for('dashboard.view_city', city_id=city_id) }}" class="back-btn">
        ‚Üê Back to Dashboard
      </a>
    </div>
  </div>
  
  <div class="card">
    <h3 class="text-xl font-semibold text-text-light mb-4">About This Report</h3>
    <div class="text-border-subtle space-y-3">
      <p>This executive dispatch report was generated using advanced AI analysis of your city's epidemiological data. It provides:</p>
      <ul class="list-disc list-inside space-y-2 ml-4">
        <li><strong>Executive Summary:</strong> High-level overview of the current situation</li>
        <li><strong>Key Findings:</strong> Critical insights from the data analysis</li>
        <li><strong>Risk Assessment:</strong> Professional evaluation of current risk levels</li>
        <li><strong>Recommendations:</strong> Actionable advice for public health officials</li>
        <li><strong>Next Steps:</strong> Strategic guidance for continued monitoring</li>
      </ul>
      <p class="mt-4 text-sm italic">This report is designed for distribution to health authorities, stakeholders, and integration with other health information systems.</p>
    </div>
  </div>
</div>
{% endblock %}
